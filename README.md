# ATM 模拟系统

## 1. 项目名称和简介
本项目是一个基于客户端-服务器架构的 ATM（自动取款机）模拟系统。它允许用户通过图形用户界面 (GUI) 或命令行界面与模拟的银行服务器进行交互，执行如身份验证、余额查询、取款等基本银行操作。

## 2. 安装方法
由于这是一个 Python 项目，安装和运行相对简单：

1.  **克隆仓库** (如果您是从版本控制系统获取):
    ```bash
    git clone https://github.com/your-username/your-atm-project.git
    cd your-atm-project
    ```
    *请将 `https://github.com/your-username/your-atm-project.git` 替换为实际的仓库地址。如果项目不在版本控制中，请直接进入项目目录。*

2.  **环境要求**:
    *   Python 3.12

    本项目没有外部依赖，标准 Python库即可运行。

## 3. 使用说明

1.  **启动服务器**:
    打开一个终端或命令行窗口，导航到项目根目录，然后运行：
    ```bash
    python server.py
    ```
    服务器将启动并开始监听客户端连接。

2.  **启动客户端**:
    打开另一个终端或命令行窗口，导航到项目根目录，然后运行：
    ```bash
    python main.py
    ```

    客户端启动后，您可以按照界面提示进行操作（例如，输入卡号、密码等）。

## 4. 功能特性
*   **用户身份验证**: 通过卡号 (userid) 和 PIN 码进行安全登录。
*   **余额查询**: 用户可以查询其账户的当前余额。
*   **取款操作**: 用户可以从其账户中提取指定金额的现金。
*   **客户端-服务器通信**: 使用自定义协议 (RFC20232023) 进行可靠通信。
*   **日志记录**: 客户端和服务器的操作都会被记录在相应的日志文件中 (`atm_client.log`, `server.log`)。
*   **用户数据存储**: 用户信息和账户数据存储在 `users.json` 文件中。

## 5. 目录结构
```
.
├── atm_client.log       # 客户端操作日志
├── atm_client.py        # 客户端核心逻辑
├── atm_gui.py           # 客户端图形用户界面 (可能使用 Tkinter 或其他 GUI 库)
├── main.py              # 项目主启动文件 (可能是客户端的入口)
├── README.md            # 项目说明文档 (当前文件)
├── server.log           # 服务器操作日志
├── server.py            # 服务器端核心逻辑，处理客户端请求
└──  users.json          # 存储用户账户信息 (卡号, 密码, 余额等)

```
*   `atm_client.py`: 实现了客户端与服务器通信的逻辑。
*   `atm_gui.py`: 提供了用户交互的图形界面。
*   `server.py`: 负责处理来自客户端的请求，如验证用户、查询余额、处理取款等。
*   `main.py`: 通常是启动客户端应用程序的入口脚本。
*   `users.json`: 以 JSON 格式存储用户信息，便于服务器读取和更新，编码
*   `*.log`: 分别记录客户端和服务器的运行日志，方便调试和追踪问题。

## 6. 协议说明：RFC20232023协议

#### **1. ATM发送至服务器的消息**
| 消息名称         | 用途描述                          |
|------------------|-----------------------------------|
| `HELO sp <userid>` | 通知服务器ATM已插卡，传输用户ID（卡号） |
| `PASS sp <passwd>` | 发送用户输入的PIN密码至服务器        |
| `BALA`           | 请求查询账户余额                    |
| `WDRA sp <amount>`| 请求提取指定金额                    |
| `BYE`            | 用户操作结束，断开连接              |

#### **2. 服务器发送至ATM的消息**
| 消息名称           | 用途描述                          |
|--------------------|-----------------------------------|
| `500 sp AUTH REQUIRE` | 要求用户输入PIN密码                |
| `525 sp OK!`        | 操作（密码验证、取款等）成功        |
| `401 sp ERROR!`     | 操作失败（密码错误、余额不足等）    |
| `AMNT :<amnt>`      | 返回余额查询结果                    |
| `BYE`              | 操作结束，指示ATM显示欢迎界面       |
